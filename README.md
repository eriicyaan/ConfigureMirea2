# ConfigLang — Компилятор учебного конфигурационного языка в JSON

ConfigLang — это инструмент командной строки, преобразующий конфигурации на учебном языке в формат JSON с поддержкой вычислений на этапе компиляции, вложенных структур и Unicode.

# Особенности
1. Типизированные конфигурации: поддержка чисел, строк, вложенных структур
2. Константы времени компиляции: объявление и использование констант
3. Постфиксные выражения: математические операции (+, -, *, /), функции (mod, sqrt)
4. Полная поддержка Unicode: кириллица, спецсимволы (², —, «ёлочки»)
5. Многострочные комментарии: <# ... #>
6. Строгая типизация: имена идентификаторов начинаются с заглавной буквы или _
7. Отладка ошибок: детальные сообщения с указанием позиции синтаксических ошибок

# Установка
1. Клонируйте репозиторий
```bash
git clone https://github.com/eriicyaan/ConfigureMirea2.git
```
2. Создайте виртуальное окружение(по желанию)

``` bash
python -m venv .venv
source .venv/bin/activate  # Linux/MacOS
# или
.venv\Scripts\activate # Windows
```

# Использование
```bash
python -m config.main -i <input-file> -o <output-file>
```

# Примеры конфигураций

```
BaseInt := 20;
SpellPower := .[BaseInt 1.5 *].;

struct {
    Name = "Элиандра",
    Class = "Mage",
    Stats = struct {
        Intelligence = BaseInt,
        Mana = .[BaseInt 10 *].,
    },
    Dialogue = "Слова мудрости:\n\"Сила — в знании\""
}
```
Результат в JSON

```json
{
  "Name": "Элиандра",
  "Class": "Mage",
  "Stats": {
    "Intelligence": 20.0,
    "Mana": 200.0
  },
  "Dialogue": "Слова мудрости:\n\"Сила — в знании\""
}
```

# Тестирование
Все компоненты покрыты unit-тестами

```bash
# Запуск всех тестов
python -m unittest discover -s config/tests -v

# Запуск конкретного теста
python -m unittest config.tests.test_integration
```

Покрыте тестами
1. Лексер (токенизация, комментарии, строки)
2. Парсер (синтаксический анализ, обработка ошибок)
3. Эвалюатор (вычисление констант, математические операции)
4. Интеграционные тесты (полный цикл преобразования)


# Структура проекта
```
config/
├── ast.py           # Узлы абстрактного синтаксического дерева
├── evaluator.py     # Вычисление константных выражений
├── lexer.py         # Токенизатор с поддержкой Unicode
├── main.py          # Точка входа CLI
├── parser.py        # Синтаксический анализатор
├── utils.py         # Вспомогательные функции
└── tests/
    ├── test_lexer.py
    ├── test_parser.py
    ├── test_evaluator.py
    ├── test_integration.py
    └── examples/    # Примеры конфигураций
        ├── character.conf
        ├── physics.conf
        └── server.conf
```
